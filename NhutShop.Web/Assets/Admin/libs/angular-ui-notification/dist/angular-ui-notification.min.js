/**
 * angular-ui-notification - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack
 * @version v0.3.2
 * @link https://github.com/alexcrack/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html",onClose:void 0,closeOnClick:!0,maxCount:0,container:"body"},this.setOptions=function(e){if(!angular.isObject(e))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,e)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(e,t,n,i,o,a,s,l,r){var c=this.options,p=c.startTop,d=c.startRight,u=c.verticalSpacing,m=c.horizontalSpacing,f=c.delay,g=[],h=!1,C=function(a,C){function y(t){function i(e){["-webkit-transition","-o-transition","transition"].forEach(function(t){f.css(t,e)})}var o=a.scope.$new();o.message=s.trustAsHtml(a.message),o.title=s.trustAsHtml(a.title),o.t=a.type.substr(0,1),o.delay=a.delay,o.onClose=a.onClose;var l=function(){for(var e=0,t=0,n=p,i=d,o=[],s=g.length-1;s>=0;s--){var l=g[s];if(a.replaceMessage&&s<g.length-1)l.addClass("killed");else{var r=parseInt(l[0].offsetHeight),f=parseInt(l[0].offsetWidth),h=o[l._positionY+l._positionX];C+r>window.innerHeight&&(h=p,t++,e=0);var C=n=h?0===e?h:h+u:p,y=i+t*(m+f);l.css(l._positionY,C+"px"),"center"==l._positionX?l.css("left",parseInt(window.innerWidth/2-f/2)+"px"):l.css(l._positionX,y+"px"),o[l._positionY+l._positionX]=C+r,c.maxCount>0&&g.length>c.maxCount&&0===s&&l.scope().kill(!0),e++}}},f=n(t)(o);f._positionY=a.positionY,f._positionX=a.positionX,f.addClass(a.type);var C=function(e){e=e.originalEvent||e,("click"===e.type||"opacity"===e.propertyName&&e.elapsedTime>=1)&&(o.onClose&&o.$apply(o.onClose(f)),f.remove(),g.splice(g.indexOf(f),1),o.$destroy(),l())};a.closeOnClick&&(f.addClass("clickable"),f.bind("click",C)),f.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",C),angular.isNumber(a.delay)&&e(function(){f.addClass("killed")},a.delay),i("none"),angular.element(document.getElementsByTagName("body")).append(f);var y=-(parseInt(f[0].offsetHeight)+50);if(f.css(f._positionY,y+"px"),g.push(f),"center"==a.positionX){var w=parseInt(f[0].offsetWidth);f.css("left",parseInt(window.innerWidth/2-w/2)+"px")}e(function(){i("")}),o._templateElement=f,o.kill=function(t){t?(o.onClose&&o.$apply(o.onClose(o._templateElement)),g.splice(g.indexOf(o._templateElement),1),o._templateElement.remove(),o.$destroy(),e(l)):o._templateElement.addClass("killed")},e(l),h||(angular.element(r).bind("resize",function(t){e(l)}),h=!0),v.resolve(o)}var v=l.defer();if("object"!=typeof a&&(a={message:a}),a.scope=a.scope?a.scope:o,a.template=a.templateUrl?a.templateUrl:c.templateUrl,a.delay=angular.isUndefined(a.delay)?f:a.delay,a.type=C||a.type||c.type||"",a.positionY=a.positionY?a.positionY:c.positionY,a.positionX=a.positionX?a.positionX:c.positionX,a.replaceMessage=a.replaceMessage?a.replaceMessage:c.replaceMessage,a.onClose=a.onClose?a.onClose:c.onClose,a.closeOnClick=null!==a.closeOnClick&&void 0!==a.closeOnClick?a.closeOnClick:c.closeOnClick,a.container=a.container?a.container:c.container,"angular-ui-notification.html"!=a.template)t.get(a.template,{cache:i}).then(y)["catch"](function(e){throw new Error("Template ("+a.template+") could not be loaded. "+e)});else{var w=i.get("angular-ui-notification.html");if(!w)throw new Error("Template ("+a.template+") could not be loaded. "+data);y(w)}return v.promise};return C.primary=function(e){return this(e,"primary")},C.error=function(e){return this(e,"error")},C.success=function(e){return this(e,"success")},C.info=function(e){return this(e,"info")},C.warning=function(e){return this(e,"warning")},C.clearAll=function(){angular.forEach(g,function(e){e.addClass("killed")})},C}]}),angular.module("ui-notification").run(["$templateCache",function(e){e.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);